<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jake Truman, Isaih Barron, and Will Martin">

<title>Final Project Template</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="cool_files/libs/clipboard/clipboard.min.js"></script>
<script src="cool_files/libs/quarto-html/quarto.js"></script>
<script src="cool_files/libs/quarto-html/popper.min.js"></script>
<script src="cool_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="cool_files/libs/quarto-html/anchor.min.js"></script>
<link href="cool_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="cool_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="cool_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="cool_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="cool_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Final Project Template</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jake Truman, Isaih Barron, and Will Martin </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<style type="text/css">
h1.title {
font-size: 40px;
text-align: center;
}
h4.author {
font-size: 40px;
text-align: center;
}
</style>
<div style="page-break-after: always;"></div>
<section id="abstract" class="level1">
<h1>Abstract</h1>
<p>Our data set involves the measurements of a species of possum over seven sites in Australia, ranging from Southern Victoria to Queensland, which encompasses almost all of Australia’s eastern coast.</p>
<section id="data-description" class="level2">
<h2 class="anchored" data-anchor-id="data-description">1.1 Data Description</h2>
<p>Briefly state the source of your data and describe the relevant variables that <strong>you will use</strong> in your project. Include important details such as units for the different variables, and what the ``observational units” (rows in the data set) represent (e.g., individuals, countries, etc.)</p>
<p>Our data was collected by wildlife researchers, on Southern Victoria to central Queensland</p>
</section>
<section id="questions-of-interest" class="level2">
<h2 class="anchored" data-anchor-id="questions-of-interest">1.2 Questions of Interest</h2>
<p><em>Briefly and clearly state the two main questions that you will investigate throughout the report.</em></p>
<p><em>These questions should be stated in scientific, and not statistical language. For example, “Is the slope of log of per capita GDP significantly different from zero?” should instead by give as “Does the log of per capita GDP have an effect on the average life expectancy of females in a given country?”</em></p>
<p>Question 1: Does the site of a possum’s capture have an effect on the total length of the possum.</p>
<p>Question 2: Is there a difference between using a the site a possum was captured at compared to the population the possum belongs to.</p>
</section>
<section id="regression-methods" class="level2">
<h2 class="anchored" data-anchor-id="regression-methods">1.3 Regression Methods</h2>
<p>To determine if the site of a possum’s capture has an effect on the total length of the possum we implemented a multiple linear regression model. Using the site a possum was caught at, the chest size of the possum, the head length, the tail length. Using best subset with a metric of AIC as the variable selection method is how we determined which variables to build our model on. Since site is categorical variable we encode it as a factor and proceed to check assumptions.</p>
<p>Since the linear model we are going to be using to fit explore this data can be used to answer both questions we conduct the exploratory data analysis for both questions here.</p>
<p>We first checked for multicolinearity using a correlation matrix, once satisfied that multicolinearty would not be an issue, we fit a tentative model and used it to find and save the residual values. Conducting a more thorough inspection of variables and their correlation we performed some variable inflation factor calculations. The mean of the VIFs was 1.90 and the max VIF was 2.08(see Figure 3), both indicate that we can continue the analysis under the assumption that the no multicolinearity is met. Another assumption we check was that the residuals are normally distributed, creating a density plot we are able to see that they are shaped like a normal distribution(see Figure 2), and continue noting that this assumption was met. We performed other checks on residuals as well and the accompanying plots are show below. Finally we checked for influential points, using a Cook’s distance plot(see Figure 1) we were able to see that all data points were within bounds meaning that none of them could be considered influential.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="cool_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="cool_files/figure-html/unnamed-chunk-1-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="analyses-results-and-interpretation" class="level1">
<h1>2 Analyses, Results, and Interpretation</h1>
<p>To answer the initial questions we had about our data set we performed multiple different tests and analysis of our models . Where the Site model was a linear model that used Site, Chest, Head Length and Tail Length as predictor variables with the response variable being Total Length(see Figure 4). The Population model was a similar linear model that only used Population, Tail Length, and Head Length as predictors and Total Length as the response(see Figure 5).</p>
<p>First we conducted an anova test to see how if the inclusion of Population and Site variables were producing statically significant different models. Essentially, we were checking to see how the addition of a categorical variable was affecting the model. We tested models that included either Site or Population as their categorical variable, for the model that contained site our anova produced a p-value of <span class="math inline">\(7.604e^{-11}\)</span> (see Figure 6). What that means is that the inclusion of Site in our model along with Chest, Head Length, and Tail length, that Site is a statistically significant predictor variable. Next we tested the inclusion of Population in the model, and the anova resulted in a p-value of <span class="math inline">\(6.395^{-10}\)</span> (see Figure 7). Which indicates that a model with Tail Length and Head Length, that Population is a statically significant predictor variable. The results of the anova tests are show below.</p>
<p>To further understand the relationship that Site and Population have as predictor variables in a linear model we conducted an anova test compare models that each contained the respective variables as predictors. The anova resulted in a p-value of <span class="math inline">\(2.747e^{-5}\)</span> (see Figure 9). Which indicates that the difference between models is statically significant at an alpha level of 0.05. The test is show below.</p>
<p>Now that we have compared model we can look at how the actual models are structured. For this section we will compare the predictor variables that both models have(Tail Length and Head Length) and what effect they have have and compare the difference categorical variables make in the models.</p>
<p>Starting with the Site model we can interpret the Tail Length as, holding all else constant we expect that on average for every 1 centimeter increase in Tail Length we expect the Total Length to increase by 1.19337 centimeters. Also, holding all else constant we expect that on average for every 1 millimeter increase in Head Length we expect the Total Length to increase by 0.40183 centimeters. We now give a generalization about the site factor, since all the coefficients of determination for each site is negative we acknowledge that each site has significant effect had on the Total Length of a possum. We note that the holding all else constant the site factor will always decrease the Total Length of the possum in comparison to the reference Site(Site 1). We note specifically that Site 3 has the smallest effect on Total Length and that Site 7 has the largest effect. Going forward all the interpretations of confidence intervals will come from the data in Figure 10.</p>
<p>With the Population model we can interpret the Tail Length as, holding all else constant we expect that on average for every 1 centimeter increase in Tail Length we expect the Total Length to increase by 1.34791 centimeters. Also, holding all else constant we expect that on average for every 1 millimeter increase in Head Length we expect the Total Length to increase by 0.57126 centimeters. For the categorical variable it can be interpreted as, holding all else constant a possum belonging to the Vic population is expected on average to have a Total length 3.53716 centimeters greater than a possum from the “Other” population.</p>
<p>Lastly we have created 95% confidence intervals for both models, to help determine the effect of predictor variables even further.</p>
<p>With the Site model having categorical variable with 6 levels we start there. Once again, we make a generalization of the results. With all of the site confidence interval being negative and all of them spanning a similar distance. We can assume,holding all else constant, with 95% confidence that the true value for each of the Sites is within the upper and lower bound of the confidence intervals produced below. We also see that none of the confidence intervals contain 0, which allows us to infer that the Site variable will always result in a decrease in the Total Length of a possum. We can further interpret the confidence interval for Head Length to mean that we are 95% confident that the true effect of increase in Head Length has on Total Length lies between 0.24512254 and 0.5585335. We are also 95% confident that holding all else constant the true effect of Tail Length on Total Length lies between 0.94229399 and 1.444456. We also are 95% confident that holding all else constant that the true effect of Chest on Total Length lies between -0.07118978 and 0.4579026. Since the confidence interval contains 0 we recognize that Chest might not have any statistically significant effect on Total Length, at the significance level of 5%.</p>
<p>Now we look at the Population model. We are 95% confident that holding all else constant that the true effect of Tail Length on Total Length is between 1.0799613 and 1.6158617. We are also 95% confident that holding all else constant the true effect of Head Length on Total Length is between 0.4395157 and 0.7030028. Finally we are 95% confident that holding all else constant that the true effect of a possum being part of the Vic Population has on the Total Length is between 2.5141664 and 4.5601573.</p>
</section>
<section id="conclusions" class="level1">
<h1>3 Conclusions</h1>
<p>We have created all these models and scores and interpretations of models. If anyone who wasn’t a statistician looked at it they wouldn’t understand what it means. So we’ll put it into terms that the average person would understand. We had two problems we wanted to answer, can we use the site a possum was captured at to determine the total length of the possum, and is there a difference between the sub population of a possum and the site a possum was captured at, when explaining the total length of a possum. The first question we used a method of linear regression to determine that we can explain roughly 80% of the variation in a possums length when we use the site of its capture. The second question can be answered in a similar fashion, there is a difference in using the sub population compared to the Site of a possums capture when explaining the variation in total length. Those are the simple answers to the questions we asked, the next section will have a more in depth analysis of the findings, a fair warning that it is not for the faint of heart.</p>
<p>Starting with the anova between models that either had or didn’t have Site as a categorical predictor variable. The test resulted in a p-value well below the significance level of 0.05 which meant they were statically significantly different. Comparing the model summaries we saw when Site was included we had an <span class="math inline">\(R^2 =.80\)</span> compared to the other model which returned <span class="math inline">\(R^2 = .64\)</span> . Including the categorical variable of site allowed for us to explain roughly 16% more of the data. Additionally when comparing models where the categorical predictor variable was Site and Population we performed an anova test which returned results that indicated there was a statically significant difference. The Population model had an <span class="math inline">\(R^2 =.73\)</span> which compare to the aforementioned value of the Site model was lesser. We also compared the Site model’s <span class="math inline">\(Adjusted\ R^2 =.79\)</span> with the Population’s <span class="math inline">\(Adjusted\ R^2 =.72\)</span> . Using both those metrics the Site model was able to explain more of the data while still being better suited to generalize potential new data. We believe the reason for this difference most likely is related to the Site’s possums were captured at. If a site had more food or a harsher environment it would make sense that the possums would be larger there, due to abundance of nutrients or to fend off predators. However, since we have no additional data we are merely speculating on the potential reason why Site as a predictor variable allowed models to perform better.</p>
<p>There are some points we felt should be brought up as potentially concerning. Firstly, we wanted to try testing an interaction term between Population and Site, we were unable to do so as the multicolinearity between the two variables was unbelievably high. Also when constructing confidence intervals for the coefficients of the Site model zero was included in the interval for the Chest variable. This typically indicates that the variable is not statically significant in the model, but since the interval was only 0.07 below zero we determined that it was acceptable to keep it in our model.</p>
</section>
<section id="contributions" class="level1">
<h1>4 Contributions</h1>
<p>For each member of the group, write a short paragraph describing their contribution to this project and the report. It is up to you to decide how to divide up the work, so long as everyone is contributing approximately equally.</p>
<section id="appendix" class="level2">
<h2 class="anchored" data-anchor-id="appendix">APPENDIX</h2>
<section id="figure-1" class="level3">
<h3 class="anchored" data-anchor-id="figure-1">Figure 1</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="cool_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="figure-2" class="level3">
<h3 class="anchored" data-anchor-id="figure-2">Figure 2</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="cool_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="figure-3" class="level3">
<h3 class="anchored" data-anchor-id="figure-3">Figure 3</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Mean VIF: 1.904972</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Individual VIFS"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>            GVIF Df GVIF^(1/(2*Df))
site    2.898799  6        1.092743
chest   1.960334  1        1.400119
hdlngth 2.085692  1        1.444193
taill   1.681179  1        1.296603</code></pre>
</div>
</div>
</section>
<section id="figure-4" class="level3">
<h3 class="anchored" data-anchor-id="figure-4">Figure 4</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = totlngth ~ site + chest + hdlngth + taill, data = data)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.4460 -0.9372 -0.0655  1.0547  4.4566 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  3.24702    7.20524   0.451 0.653316    
site2       -3.89291    0.75700  -5.143 1.54e-06 ***
site3       -2.91875    0.81172  -3.596 0.000525 ***
site4       -3.35399    0.91915  -3.649 0.000439 ***
site5       -3.45206    0.67551  -5.110 1.76e-06 ***
site6       -4.38385    0.76391  -5.739 1.24e-07 ***
site7       -4.81297    0.63264  -7.608 2.47e-11 ***
chest        0.19336    0.13318   1.452 0.149985    
hdlngth      0.40183    0.07889   5.094 1.89e-06 ***
taill        1.19337    0.12640   9.441 3.77e-15 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.922 on 91 degrees of freedom
Multiple R-squared:  0.8091,    Adjusted R-squared:  0.7902 
F-statistic: 42.86 on 9 and 91 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="figure-5" class="level3">
<h3 class="anchored" data-anchor-id="figure-5">Figure 5</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Model 1: totlngth ~ site + chest + hdlngth + taill
Model 2: totlngth ~ chest + hdlngth + taill
  Res.Df    RSS Df Sum of Sq      F    Pr(&gt;F)    
1     91 336.20                                  
2     97 633.74 -6   -297.53 13.422 7.604e-11 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section id="figure-6" class="level3">
<h3 class="anchored" data-anchor-id="figure-6">Figure 6</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = totlngth ~ hdlngth + taill + Pop, data = data)

Residuals:
    Min      1Q  Median      3Q     Max 
-6.5230 -1.3808  0.2465  1.4013  4.1322 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) -17.14933    6.54538  -2.620   0.0102 *  
hdlngth       0.57126    0.06638   8.606 1.36e-13 ***
taill         1.34791    0.13501   9.984  &lt; 2e-16 ***
PopVic        3.53716    0.51543   6.862 6.39e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.197 on 97 degrees of freedom
Multiple R-squared:  0.7341,    Adjusted R-squared:  0.7258 
F-statistic: 89.25 on 3 and 97 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
</div>
</section>
<section id="figure-7" class="level3">
<h3 class="anchored" data-anchor-id="figure-7">Figure 7</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Model 1: totlngth ~ hdlngth + taill
Model 2: totlngth ~ hdlngth + taill + Pop
  Res.Df    RSS Df Sum of Sq      F    Pr(&gt;F)    
1     98 695.82                                  
2     97 468.41  1    227.41 47.094 6.395e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section id="figure-8" class="level3">
<h3 class="anchored" data-anchor-id="figure-8">Figure 8</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Mean VIF: 1.31854</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Individual VIFS"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> hdlngth    taill      Pop 
1.129736 1.467343 1.358541 </code></pre>
</div>
</div>
</section>
<section id="figure-9" class="level3">
<h3 class="anchored" data-anchor-id="figure-9">Figure 9</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Model 1: totlngth ~ site + chest + hdlngth + taill
Model 2: totlngth ~ hdlngth + taill + Pop
  Res.Df    RSS Df Sum of Sq      F    Pr(&gt;F)    
1     91 336.20                                  
2     97 468.41 -6    -132.2 5.9637 2.747e-05 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</section>
<section id="figure-10" class="level3">
<h3 class="anchored" data-anchor-id="figure-10">Figure 10</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Population Model Confidecnce Interval"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                  2.5 %     97.5 %
(Intercept) -30.1401049 -4.1585634
hdlngth       0.4395157  0.7030028
taill         1.0799613  1.6158617
PopVic        2.5141664  4.5601573</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Site Model Confidecnce Interval"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                   2.5 %     97.5 %
(Intercept) -11.06530001 17.5593448
site2        -5.39659166 -2.3892225
site3        -4.53112756 -1.3063683
site4        -5.17976857 -1.5282027
site5        -4.79388680 -2.1102333
site6        -5.90125262 -2.8664456
site7        -6.06963729 -3.5563020
chest        -0.07118978  0.4579026
hdlngth       0.24512254  0.5585335
taill         0.94229399  1.4444556</code></pre>
</div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>